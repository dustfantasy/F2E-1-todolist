webpackJsonp([1],{"+skl":function(t,e){},"0tuQ":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),o=i("woOf"),n=i.n(o),a=i("Dd8w"),r=i.n(a),d=i("Gu7T"),l=i.n(d),c=i("BO1k"),m=i.n(c),u={name:"todoitem",props:{Item:{type:Object},index:{type:Number}},data:function(){return{newItem:{title:"",deadLine:"",files:[],comment:""},titleClass:{todotitle:!0,"todotitle-star":this.Item.star,"todotitle-edit":!1},notice:[]}},created:function(){this.updateNotice(this.Item),this.init()},watch:{"Item.complete":function(){this.$emit("putTodoItem",this.Item.id,this.Item)}},methods:{init:function(){this.newItem=r()({},this.Item),delete this.newItem.complete,delete this.newItem.edit,delete this.newItem.star,delete this.newItem.order},upload:function(){var t=this,e=document.getElementById("upload");e.click(),e.addEventListener("change",function(i){t.newItem.files=e.files})},setStar:function(){this.Item.star=!this.Item.star,this.titleClass["todotitle-star"]=this.Item.star,this.$emit("putTodoItem",this.Item.id,this.Item)},setComplete:function(){},editing:function(){this.Item.edit||(this.Item.edit=!0,this.titleClass["todotitle-edit"]=this.Item.edit,this.init())},cancel:function(){this.Item.edit=!1,this.titleClass["todotitle-edit"]=this.Item.edit,this.$emit("cancel"),this.init()},save:function(){this.newItem.title?(this.Item.edit=!1,this.titleClass["todotitle-edit"]=this.Item.edit,this.$emit("save",this.newItem,this.index),this.updateNotice(this.newItem),this.init()):alert("標題不能為空")},updateNotice:function(t){this.notice=[];var e=!0,i=!1,s=void 0;try{for(var o,n=m()(["deadLine","files","comment"]);!(e=(o=n.next()).done);e=!0){var a=o.value;t.hasOwnProperty(a)&&("files"===a&&0!==t[a].length?this.notice.push(a):"files"!==a&&""!==t[a]&&this.notice.push(a))}}catch(t){i=!0,s=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw s}}}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"todoitem"}},[i("section",[i("header",{class:t.titleClass},[i("Row",[i("Col",{attrs:{span:"1",offset:"3"}},[i("Checkbox",{attrs:{size:"large"},nativeOn:{click:function(e){return e.stopPropagation(),t.setComplete(e)}},model:{value:t.Item.complete,callback:function(e){t.$set(t.Item,"complete",e)},expression:"Item.complete"}})],1),t._v(" "),i("Col",{attrs:{span:"15",id:"titleInput"}},[i("Input",{directives:[{name:"show",rawName:"v-show",value:t.Item.edit,expression:"Item.edit"}],attrs:{placeholder:"Type Something Here...",disabled:t.Item.complete},model:{value:t.newItem.title,callback:function(e){t.$set(t.newItem,"title",e)},expression:"newItem.title"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.Item.edit,expression:"!Item.edit"}],style:{textDecoration:t.Item.complete?"line-through":""}},[t._v(t._s(t.Item.title))])],1),t._v(" "),i("Col",{attrs:{span:"2",offset:"1"}},[i("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.Item.star,expression:"!Item.star"}],staticStyle:{cursor:"pointer"},attrs:{type:"ios-star-outline"},on:{click:function(e){return e.stopPropagation(),t.setStar(e)}}}),t._v(" "),i("Icon",{directives:[{name:"show",rawName:"v-show",value:t.Item.star,expression:"Item.star"}],staticStyle:{color:"#F5A623",cursor:"pointer"},attrs:{type:"ios-star"},on:{click:function(e){return e.stopPropagation(),t.setStar(e)}}})],1),t._v(" "),i("Col",{attrs:{span:"2"}},[i("Icon",{directives:[{name:"show",rawName:"v-show",value:t.Item.edit,expression:"Item.edit"}],staticStyle:{color:"blue"},attrs:{type:"edit"}}),t._v(" "),i("Icon",{directives:[{name:"show",rawName:"v-show",value:!t.Item.edit,expression:"!Item.edit"}],staticStyle:{cursor:"pointer"},attrs:{type:"edit"},on:{click:t.editing}})],1)],1),t._v(" "),i("Row",{directives:[{name:"show",rawName:"v-show",value:!t.Item.edit,expression:"!Item.edit"}]},t._l(t.notice,function(e,s){return i("Col",{key:s,attrs:{span:"2",offset:0===s?4:0}},[i("i",{directives:[{name:"show",rawName:"v-show",value:"deadLine"===e,expression:"notice==='deadLine'"}],staticClass:"fa fa-calendar"}),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:"files"===e,expression:"notice==='files'"}],staticClass:"fa fa-file-o"}),t._v(" "),i("i",{directives:[{name:"show",rawName:"v-show",value:"comment"===e,expression:"notice==='comment'"}],staticClass:"fa fa-commenting-o"})])}))],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.Item.edit,expression:"Item.edit"}],staticClass:"todobody"},[i("Row",[i("Col",{attrs:{span:"1",offset:"4"}},[i("i",{staticClass:"fa fa-calendar"})]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("Deadline")])],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"16",offset:"5"}},[i("DatePicker",{attrs:{type:"datetime",disabled:t.Item.complete},model:{value:t.newItem.deadLine,callback:function(e){t.$set(t.newItem,"deadLine",e)},expression:"newItem.deadLine"}})],1)],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"1",offset:"4"}},[i("i",{staticClass:"fa fa-file-o"})]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("File")])],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"15",offset:"5"}},[i("Row",[t._l(t.newItem.files,function(e,s){return i("Col",{key:s,attrs:{span:"8"}},[t._v(t._s(e.name))])}),t._v(" "),i("Col",{attrs:{span:"8"}},[i("Button",{attrs:{type:"ghost",icon:"plus",disabled:t.Item.complete},on:{click:t.upload}},[i("input",{attrs:{id:"upload",type:"file",hidden:""}})])],1)],2)],1)],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"1",offset:"4"}},[i("i",{staticClass:"fa fa-commenting-o"})]),t._v(" "),i("Col",{attrs:{span:"16"}},[t._v("Comment")])],1),t._v(" "),i("Row",[i("Col",{attrs:{span:"16",offset:"5"}},[i("Input",{attrs:{type:"textarea",rows:4,placeholder:"Enter something...",disabled:t.Item.complete},model:{value:t.newItem.comment,callback:function(e){t.$set(t.newItem,"comment",e)},expression:"newItem.comment"}})],1)],1)],1),t._v(" "),i("footer",{directives:[{name:"show",rawName:"v-show",value:t.Item.edit,expression:"Item.edit"}],staticClass:"todofooter"},[i("Row",[i("Col",{staticClass:"cancel-button",attrs:{span:"12"}},[i("div",{on:{click:t.cancel}},[i("Icon",{attrs:{type:"ios-close-empty"}}),t._v(" Cancel\n          ")],1)]),t._v(" "),i("Col",{staticClass:"add-button",attrs:{span:"12"}},[i("div",{on:{click:t.save}},[i("Icon",{attrs:{type:"ios-plus-empty"}}),t._v(" Save\n          ")],1)])],1)],1)])])},staticRenderFns:[]};var h={name:"App",components:{todoitemEdit:i("VU/8")(u,p,!1,function(t){i("g4lM")},null,null).exports},data:function(){return{add:!1,item:{complete:!1,star:!1,edit:!0,title:"",deadLine:"",files:[],comment:""},newItem:{},itemList:[],viewItemList:[],nowPage:"My Tasks",order:[]}},created:function(){var t=document.getElementsByTagName("body")[0];t.addEventListener("drop",this.drop),t.addEventListener("dragover",this.allowDrop),this.getOrder(),this.getTodoItems()},computed:{filterItemList:function(){var t=this,e={"In Progess":function(){return t.itemList.filter(function(t){return!t.complete})},Completed:function(){return t.itemList.filter(function(t){return t.complete})},"My Tasks":function(){return[].concat(l()(t.itemList))}};return e[this.nowPage]()}},methods:{getOrder:function(){var t=this;this.axios.get("http://localhost:3000/order/1").then(function(e){console.log(e),t.order=e.data.order,t.sortByOrder()})},putOrder:function(){this.axios.put("http://localhost:3000/order/1",{order:this.order}).then(function(t){console.log(t)})},getTodoItems:function(){var t=this;this.axios.get("http://localhost:3000/todoitems/").then(function(e){console.log(e),t.itemList=e.data,t.sortByOrder()})},postTodoItem:function(t){var e=this;t.edit=!1,this.axios.post("http://localhost:3000/todoitems/",t).then(function(t){console.log(t),e.itemList.unshift(t.data),e.order.unshift(t.data.id),e.putOrder()})},putTodoItem:function(t,e){e=r()({},e,{edit:!1}),this.axios.put("http://localhost:3000/todoitems/"+t,e).then(function(t){console.log(t)})},sortByOrder:function(){var t=this;0!==this.itemList.length&&0!==this.order.length&&(this.itemList=this.order.map(function(e){return t.itemList.find(function(t){return t.id===e})}))},drop:function(t,e){var i=t.dataTransfer.getData("id"),s=a.call(this,i);if(void 0===e)t.clientY<=145&&(n(this.itemList,s,0),n(this.order,s,0),this.putOrder());else{var o=a.call(this,e);o=t.offsetY<50?o:o+1,n(this.itemList,s,o),n(this.order,s,o),this.putOrder()}function n(t,e,i){var s=t[e];t.splice(e,1),t.splice(i,0,s)}function a(t){var e=void 0;return this.itemList.every(function(i,s){return i.id!=t||(e=s,!1)}),e}},allowDrop:function(t){t.preventDefault()},dropStart:function(t,e){t.dataTransfer.setData("id",e)},menuClick:function(t){"LI"===t.target.tagName&&(menu.getElementsByClassName("active")[0].classList.remove("active"),t.target.className="active",this.nowPage=t.target.innerText)},addTask:function(){this.add=!this.add,this.newItem=n()({},this.item),this.$refs.addTask.editing()},cancel:function(){this.add=!this.add},save:function(t,e){if(void 0!==e){var i=n()(this.itemList[e],t);this.putTodoItem(this.itemList[e].id,i)}else{this.add=!this.add;var s=r()({},this.newItem,t);this.postTodoItem(s)}}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("header",{staticClass:"pageTitle"},[i("ul",{attrs:{id:"menu"},on:{click:t.menuClick}},[i("li",{staticClass:"active"},[t._v("My Tasks")]),t._v(" "),i("li",[t._v("In Progess")]),t._v(" "),i("li",[t._v("Completed")])])]),t._v(" "),i("main",[i("div",{attrs:{id:"addTask"}},[i("Button",{directives:[{name:"show",rawName:"v-show",value:!t.add,expression:"!add"}],staticClass:"addTask",on:{click:t.addTask}},[i("Icon",{attrs:{type:"plus"}}),t._v(" Add Task\n      ")],1)],1),t._v(" "),i("todoitemEdit",{directives:[{name:"show",rawName:"v-show",value:t.add,expression:"add"}],ref:"addTask",attrs:{Item:t.newItem},on:{cancel:t.cancel,save:t.save}}),t._v(" "),t._l(t.filterItemList,function(e,s){return i("todoitemEdit",{key:e.id,attrs:{Item:e,index:s,draggable:"true"},on:{save:t.save,filterItemList:t.filterItemList,putTodoItem:t.putTodoItem},nativeOn:{dragover:function(e){e.stopPropagation(),t.allowDrop(e)},drop:function(i){i.stopPropagation(),t.drop(i,e.id)},dragstart:function(i){t.dropStart(i,e.id)}}})})],2)])},staticRenderFns:[]};var v=i("VU/8")(h,f,!1,function(t){i("0tuQ")},null,null).exports,I=i("BTaQ"),w=i.n(I),g=(i("+skl"),i("mtWM")),_=i.n(g),C=i("Rf8U"),y=i.n(C);s.default.config.productionTip=!1,s.default.use(w.a),s.default.use(y.a,_.a),new s.default({el:"#app",components:{App:v},template:"<App/>"})},g4lM:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.0be0a99d5409be5b7c9c.js.map